// This file has been autogenerated from a class added in the UI designer.

using System;

using Foundation;
using UIKit;

namespace OMAPGMap.iOS
{
	public partial class SettingsViewController : UITableViewController
	{
        public SettingsViewController(IntPtr ptr) : base(ptr)
        {
            
        }

        public override void ViewDidLoad()
        {
            base.ViewDidLoad();
            Title = "Pokemon Filters";
            NavigationItem.LeftBarButtonItem = new UIBarButtonItem("Done", UIBarButtonItemStyle.Done, (sender, e) =>
             {
                DismissViewController(true, null);
             });
        }

        public override UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath)
        {
            var cell = tableView.DequeueReusableCell("FilterCell", indexPath);
            var img = cell.ViewWithTag(1) as UIImageView;
            var notifyLbl = cell.ViewWithTag(2) as UILabel;
            var notifySwitch = cell.ViewWithTag(3) as UISwitch;
            var trashLbl = cell.ViewWithTag(4) as UILabel;
            var trashSwitch = cell.ViewWithTag(5) as UISwitch;
            img.Image = UIImage.FromBundle(indexPath.Row.ToString("D3"));
            if (ServiceLayer.SharedInstance.PokemonEnabled[indexPath.Row])
            {
                img.Alpha = 1.0f;
                cell.Accessory = UITableViewCellAccessory.Checkmark;
                notifyLbl.TextColor = UIColor.Black;
				trashSwitch.Enabled = true;
                trashSwitch.On = ServiceLayer.SharedInstance.TrashEnabled[indexPath.Row];
				notifySwitch.Enabled = false;
				notifySwitch.On = false;
            } else {
                img.Alpha = 0.7f;
                cell.Accessory = UITableViewCellAccessory.None;
                notifyLbl.TextColor = UIColor.LightGray;
                trashLbl.TextColor = UIColor.LightGray;
                trashSwitch.Enabled = false;
                trashSwitch.On = false;
                notifySwitch.Enabled = false;
                notifySwitch.On = false;
            }
            return cell;
        }

        public override nint RowsInSection(UITableView tableView, nint section)
        {
            return ServiceLayer.SharedInstance.PokemonEnabled.Length;
        }
	}
}
